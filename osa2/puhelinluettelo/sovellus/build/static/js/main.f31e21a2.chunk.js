(this.webpackJsonpsovellus=this.webpackJsonpsovellus||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),l=t.n(r),u=(t(20),t(14)),c=t(3),i=function(e){var n=e.text;return o.a.createElement("h2",null,n)},m=function(e){return o.a.createElement("div",null,o.a.createElement("p",null,e.name," ",e.number," ",o.a.createElement("button",{value:e.name,onClick:e.delete},"delete")))},f=function(e){var n=e.persons;return e.filter&&(n=n.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())}))),o.a.createElement("div",null,o.a.createElement("ul",null,n.map((function(n){return o.a.createElement("li",{key:n.name}," ",o.a.createElement(m,{delete:e.onClick,name:n.name,number:n.number})," ")}))))},d=function(e){return o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("div",null,"Name: ",o.a.createElement("input",{onChange:e.onChange,value:e.newName})),o.a.createElement("div",null,"Number: ",o.a.createElement("input",{onChange:e.onChangeNumber,value:e.newNumber})),o.a.createElement("div",null,o.a.createElement("button",{onClick:e.onClick,type:"submit"},"add"))))},s=function(e){return o.a.createElement("div",null,"filter ",o.a.createElement("input",{onChange:e.onChange,value:e.value}))},b=function(e){var n=e.message;return null===n?o.a.createElement("div",null):o.a.createElement("div",{style:{color:"green",fontSize:50,backgroundColor:"lightgrey",borderStyle:"solid",borderRadius:5,padding:5,textAlign:"center"}},n)},p=t(2),v=t.n(p),h="/api/persons",E=function(e){return v.a.post(h,e).then((function(e){return e.data}))},g=function(e,n){return v.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},C=function(e){return v.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([{name:"aantikainen",number:"1231231231",id:1},{name:"Ada Lovelace",number:"1800-CALLME",id:2}]),n=Object(c.a)(e,2),t=n[0],r=n[1],l=Object(a.useState)(""),m=Object(c.a)(l,2),p=m[0],h=m[1],w=Object(a.useState)(""),k=Object(c.a)(w,2),j=k[0],O=k[1],y=Object(a.useState)(""),N=Object(c.a)(y,2),S=N[0],x=N[1],D=Object(a.useState)("Welcome to phonebook app!"),L=Object(c.a)(D,2),A=L[0],P=L[1];Object(a.useEffect)((function(){console.log("effect"),v.a.get("/api/persons").then((function(e){console.log("promise fulfilled"),r(e.data)}))}),[]);return o.a.createElement("div",null,o.a.createElement(b,{message:A}),o.a.createElement(i,{text:"Phonebook"}),o.a.createElement(s,{onChange:function(e){e.preventDefault(),x(e.target.value)},value:S,filter:S}),o.a.createElement(i,{text:"Add a new"}),o.a.createElement(d,{onChangeNumber:function(e){e.preventDefault(),O(e.target.value)},newNumber:j,input:p,onChange:function(e){e.preventDefault(),h(e.target.value)},onClick:function(e){e.preventDefault();var n={name:p,number:j,id:Math.floor(Math.random(99999))};if(t.find((function(e){return e.name===n.name}))){if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one ?"))){var a=t.find((function(e){return e.name===n.name}));g(a.id,Object(u.a)({},a,{number:j})).then((function(e){r(t.map((function(n){return n.name===p?e:n}))),P("Person '".concat(n.name,"' 's phonenumber has been updated!")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e)}))}}else E(n).then((function(e){r(t.concat(e)),h(""),O(""),P("Person '".concat(n.name,"' added!")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e.response.data)}))}}),o.a.createElement(i,{text:"Numbers"}),o.a.createElement(f,{filter:S,persons:t,onClick:function(e){e.preventDefault();var n=t.find((function(n){return n.name===e.target.value}));window.confirm("Do you really want to delete ".concat(n.name," ?"))&&C(n.id).then((function(){r(t.filter((function(e){return e.id!==n.id}))),h(""),O(""),P("Person '".concat(n.name,"' deleted!")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e),r(t.filter((function(e){return e.name!==n.name}))),P("User ".concat(n.name," has already been removed!"))}))}}))};v.a.get("/api/persons").then((function(e){console.log(e)})),l.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f31e21a2.chunk.js.map